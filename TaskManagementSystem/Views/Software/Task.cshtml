
@{
    ViewBag.Title = "Task";
}

<head>
    @Styles.Render("~/Content/styleD.css")
</head>
@Html.Partial("NavBar")

<div class="container">
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h2>
                Task List
            </h2>
            <ol class="breadcrumb">
                <li><a href="../Software/Dashboard"><i class="fa fa-table"></i> Home</a></li>
                <li class="active">Task</li>
            </ol>
        </section>
        
        <form>
            <div id="theInputDate"></div>
            <wj-input-date value="theDate" min="2014-8-1" format="M/d/yyyy">
                <div id="cboClientNameDiv" style="width :300px;"></div>
                <div id="cboStaffNameDiv" style="width :120px;"></div>
</form>

    </div>
        
</div>

@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/software-js")

<script type="text/javascript">

    var clientList;
    var staffList;

    var cboBoxClientName;
    var cboBoxStaffName;

    // ==================
    // Get Client List Data
    // ==================

    function getClientName() {
        var clientList = new wijmo.collections.ObservableArray();
        $.ajax({
            url: '/api/client/list',
            cache: false,
            type: 'GET',
            contentType: 'application/json; charset=utf-8',
            data: {},
            success: function (results) {
                var lastUser = 0;
                if (results.length > 0) {
                    for (i = 0; i < results.length; i++) {
                        clientList.push({
                            Id: results[i]["Id"],
                            CompanyName: results[i]["CompanyName"],
                            CompanyAddress: results[i]["CompanyAddress"],
                            ContactNumber: results[i]["ContactNumber"],
                            DateAccepted: results[i]["DateAccepted"],
                            IsLocked: results[i]["IsLocked"]
                        });
                    }
                    cboClientfName(clientList);
                } else {
                    cboClientfName(clientList);
                }
            }
        });

        return clientList;
    }



    // =============================
    // Combo Box Wijmo - Client List
    // =============================

    function cboClientfName(clientList) {
        var clientCollection = new wijmo.collections.CollectionView(clientList);
        var clientList = new Array();
        for (var i = 0; i < clientCollection.items.length; i++) {

            clientList.push(clientCollection.items[i].CompanyName);
        }

        cboBoxClientName.dispose();
        cboBoxClientName = new wijmo.input.ComboBox('#cboClientNameDiv', {
            placeholder: "Select Client",
            itemsSource: clientList,
            isEditable: false
        });
    }

    // ==================
    // Get StaffName Data
    // ==================

    function getStaffName() {
        var staffList = new wijmo.collections.ObservableArray();
        $.ajax({
            url: '/api/product/list',
            cache: false,
            type: 'GET',
            contentType: 'application/json; charset=utf-8',
            data: {},
            success: function (results) {
                var lastUser = 0;
                if (results.length > 0) {
                    for (i = 0; i < results.length; i++) {
                        staffList.push({
                            Id: results[i]["Id"],
                            ProductCode: results[i]["ProductCode"],
                            ProductDescription: results[i]["ProductDescription"]
                        });
                    }
                    cboStaffName(staffList);
                } else {
                    cboStaffName(staffList);
                }
            }
        });

        return staffList;
    }

    // =============================
    // Combo Box Wijmo - Staff Name
    // =============================

    function cboStaffName(staffList) {
        var staffCollection = new wijmo.collections.CollectionView(staffList);
        var staffList = new Array();
        for (var i = 0; i < staffCollection.items.length; i++) {

            staffList.push(staffCollection.items[i].ProductCode);
        }

        cboBoxStaffName.dispose();
        cboBoxStaffName = new wijmo.input.ComboBox('#cboStaffNameDiv', {
            placeholder: "Select Staff",
            itemsSource: staffList,
            isEditable: false
        });
    }
   

    $(document).ready(function () {

        cboBoxClientName = new wijmo.input.ComboBox('#cboClientNameDiv');
        cboBoxStaffName = new wijmo.input.ComboBox('#cboStaffNameDiv');
        getClientName();
        getStaffName();

        // the date/time being edited
        var theDate = new Date();

        // create InputDate control
        var inputDate = new wijmo.input.InputDate('#theInputDate', {
            min: new Date(2014, 8, 1),
            format: 'M/d/yyyy',
            value: theDate
        });
        inputDate.valueChanged.addHandler(valueChanged);

        // create InputTime control
        var inputTime = new wijmo.input.InputTime('#theInputTime', {
            min: new Date(2014, 8, 1, 9, 0),
            max: new Date(2014, 8, 1, 17, 0),
            step: 15,
            format: 'h:mm tt',
            value: theDate
        });
        inputTime.valueChanged.addHandler(valueChanged);

        // create Calendar control
        var calendar = new wijmo.input.Calendar('#theCalendar', {
            min: new Date(2014, 8, 1),
            value: theDate
        });
        calendar.valueChanged.addHandler(valueChanged);

        // udpate theDate when the value changes in any of the controls
        function valueChanged(s, e) {
            theDate = s.value;
            inputDate.value = inputTime.value = calendar.value = theDate;
        }
    });
</script>

@Html.Partial("Footer")